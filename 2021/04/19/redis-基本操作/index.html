<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="å°æ—"><meta name="copyright" content="å°æ—"><meta name="generator" content="Hexo 5.4.1"><meta name="theme" content="hexo-theme-yun"><title>redis-åŸºæœ¬æ“ä½œ | å°æ—ã®ç©ºä¸­åŸºåœ°</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"example.com","root":"/","title":"å°æ—ã®ç©ºä¸­åŸºåœ°","version":"1.9.1","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"fireworks":{"colors":null},"vendors":{"darken":"https://cdn.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="ä»‹ç»redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬string(å­—ç¬¦ä¸²)ã€list(é“¾è¡¨)ã€set(é›†åˆ)ã€zset(sorted set â€“æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush&#x2F;popã€add&#x2F;removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åº">
<meta property="og:type" content="article">
<meta property="og:title" content="redis-åŸºæœ¬æ“ä½œ">
<meta property="og:url" content="http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/index.html">
<meta property="og:site_name" content="å°æ—ã®ç©ºä¸­åŸºåœ°">
<meta property="og:description" content="ä»‹ç»redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬string(å­—ç¬¦ä¸²)ã€list(é“¾è¡¨)ã€set(é›†åˆ)ã€zset(sorted set â€“æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush&#x2F;popã€add&#x2F;removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åº">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/img/35467646745.png">
<meta property="og:image" content="http://example.com/2021/04/19/img/006tNbRwgy1ga7otagi3lj30p00f2q8l.jpg">
<meta property="og:image" content="http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/img/1350514-20181022211822785-370585666.png">
<meta property="article:published_time" content="2021-04-19T08:28:50.000Z">
<meta property="article:modified_time" content="2022-03-20T15:23:31.303Z">
<meta property="article:author" content="å°æ—">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/img/35467646745.png"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å°æ—"><img width="96" loading="lazy" src="/images/avatar1.jpg" alt="å°æ—"><span class="site-author-status" title="Looking for dawn.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">å°æ—</a></div><span class="site-name">å°æ—ã®ç©ºä¸­åŸºåœ°</span><sub class="site-subtitle">You're always there for me.</sub><div class="site-description">ç»å†é£é›¨æœªå¿…ç°å½©è™¹ï¼Œä½†å½©è™¹æ€»åœ¨é£é›¨å</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">45</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">0</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">13</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/xiaolin-666" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=1293010382" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/21350202" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/elpsycn" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@xiaolin.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">redisçš„å®‰è£…å’Œä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%885%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">æ”¯æŒçš„æ•°æ®ç±»å‹ï¼ˆ5å¤§æ•°æ®ç±»å‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#string%E3%80%81list%E3%80%81set%E3%80%81zset%E3%80%81hash"><span class="toc-number">3.0.1.</span> <span class="toc-text">stringã€listã€setã€zsetã€hash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-number">3.0.2.</span> <span class="toc-text">ç‰¹ç‚¹ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String"><span class="toc-number">4.</span> <span class="toc-text">String</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hash"><span class="toc-number">5.</span> <span class="toc-text">Hash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List"><span class="toc-number">6.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">7.</span> <span class="toc-text">set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zset"><span class="toc-number">8.</span> <span class="toc-text">zset</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">8.0.0.1.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#API%E4%BD%BF%E7%94%A8"><span class="toc-number">8.0.0.2.</span> <span class="toc-text">APIä½¿ç”¨</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E6%93%8D%E4%BD%9CRedis%E4%B9%8B%E5%AE%89%E8%A3%85%E5%92%8C%E6%94%AF%E6%8C%81%E5%AD%98%E5%82%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.</span> <span class="toc-text">Pythonæ“ä½œRedisä¹‹å®‰è£…å’Œæ”¯æŒå­˜å‚¨ç±»å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E6%93%8D%E4%BD%9CRedis%E4%B9%8B%E6%99%AE%E9%80%9A%E8%BF%9E%E6%8E%A5"><span class="toc-number">10.</span> <span class="toc-text">Pythonæ“ä½œRedisä¹‹æ™®é€šè¿æ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E6%93%8D%E4%BD%9CRedis%E4%B9%8B%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">11.</span> <span class="toc-text">Pythonæ“ä½œRedisä¹‹è¿æ¥æ± </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E6%93%8D%E4%BD%9C"><span class="toc-number">12.</span> <span class="toc-text">å…¶å®ƒæ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93"><span class="toc-number">13.</span> <span class="toc-text">ç®¡é“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Django%E4%B8%AD%E4%BD%BF%E7%94%A8redis"><span class="toc-number">14.</span> <span class="toc-text">Djangoä¸­ä½¿ç”¨redis</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å°æ—"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å°æ—ã®ç©ºä¸­åŸºåœ°"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">redis-åŸºæœ¬æ“ä½œ<a class="post-edit-link" href="https://github.com/xiaolin-666/xiaolin-666.github.io/tree/hexo/source/_posts/redis-åŸºæœ¬æ“ä½œ.md" target="_blank" title="Edit this post" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2021-04-19 16:28:50" itemprop="dateCreated datePublished" datetime="2021-04-19T16:28:50+08:00">2021-04-19</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2022-03-20 23:23:31" itemprop="dateModified" datetime="2022-03-20T23:23:31+08:00">2022-03-20</time></div><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/redis/" style="--text-color:orange"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">redis</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬string(å­—ç¬¦ä¸²)ã€list(é“¾è¡¨)ã€set(é›†åˆ)ã€zset(sorted set â€“æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush/popã€add/removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸memcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥</p>
<h2 id="redisçš„å®‰è£…å’Œä½¿ç”¨"><a href="#redisçš„å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="redisçš„å®‰è£…å’Œä½¿ç”¨"></a>redisçš„å®‰è£…å’Œä½¿ç”¨</h2><p><strong>Windowsä¸‹å®‰è£…</strong></p>
<p>1ã€è¦å®‰è£…Redisï¼Œé¦–å…ˆè¦è·å–å®‰è£…åŒ…ã€‚Windowsçš„Rediså®‰è£…åŒ…éœ€è¦åˆ°ä»¥ä¸‹GitHubé“¾æ¥æ‰¾åˆ°ã€‚é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://github.com/MSOpenTech/redis%E3%80%82%E6%89%93%E5%BC%80%E7%BD%91%E7%AB%99%E5%90%8E%EF%BC%8C%E6%89%BE%E5%88%B0Release%EF%BC%8C%E7%82%B9%E5%87%BB%E5%89%8D%E5%BE%80%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2%E3%80%82">https://github.com/MSOpenTech/redisã€‚æ‰“å¼€ç½‘ç«™åï¼Œæ‰¾åˆ°Releaseï¼Œç‚¹å‡»å‰å¾€ä¸‹è½½é¡µé¢ã€‚</a></p>
<p>2ã€åœ¨ä¸‹è½½ç½‘é¡µä¸­ï¼Œæ‰¾åˆ°æœ€åå‘è¡Œçš„ç‰ˆæœ¬ï¼ˆæ­¤å¤„æ˜¯3.2.100ï¼‰ã€‚æ‰¾åˆ°Redis-x64-3.2.100.msiå’ŒRedis-x64-3.2.100.zipï¼Œç‚¹å‡»ä¸‹è½½ã€‚è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯msiå¾®è½¯æ ¼å¼çš„å®‰è£…åŒ…ï¼Œç¬¬äºŒä¸ªæ˜¯å‹ç¼©åŒ…ã€‚</p>
<p>3ã€åŒå‡»åˆšä¸‹è½½å¥½çš„msiæ ¼å¼çš„å®‰è£…åŒ…ï¼ˆRedis-x64-3.2.100.msiï¼‰å¼€å§‹å®‰è£…ã€‚</p>
<p>4ã€é€‰æ‹©â€œåŒæ„åè®®â€ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ç»§ç»­ã€‚</p>
<p>5ã€é€‰æ‹©â€œæ·»åŠ Redisç›®å½•åˆ°ç¯å¢ƒå˜é‡PATHä¸­â€ï¼Œè¿™æ ·æ–¹ä¾¿ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«Redisæ‰§è¡Œæ–‡ä»¶åœ¨å“ªé‡Œ</p>
<p>6ã€ç«¯å£å·å¯ä¿æŒé»˜è®¤çš„6379ï¼Œå¹¶é€‰æ‹©é˜²ç«å¢™ä¾‹å¤–ï¼Œä»è€Œä¿è¯å¤–éƒ¨å¯ä»¥æ­£å¸¸è®¿é—®RedisæœåŠ¡</p>
<p>7ã€è®¾å®šæœ€å¤§å€¼ä¸º100M(å®éªŒæˆ–å­¦ä¹ è¶³å¤Ÿ)</p>
<p>8ã€ç‚¹å‡»å®‰è£…åï¼Œæ­£å¼çš„å®‰è£…è¿‡ç¨‹å¼€å§‹ã€‚ç¨ç­‰ä¸€ä¼šå³å¯å®Œæˆã€‚</p>
<p>9ã€å®‰è£…å®Œæ¯•åï¼Œéœ€è¦å…ˆåšä¸€äº›è®¾å®šå·¥ä½œï¼Œä»¥ä¾¿æœåŠ¡å¯åŠ¨åèƒ½æ­£å¸¸è¿è¡Œã€‚ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‰“å¼€RedisæœåŠ¡é…ç½®æ–‡ä»¶ã€‚<strong>æ³¨æ„ï¼šé€šå¸¸ä¸ºredis.windows-service.confï¼Œè€Œä¸æ˜¯redis.windows.confã€‚åè€…æ˜¯ä»¥éç³»ç»ŸæœåŠ¡æ–¹å¼å¯åŠ¨ç¨‹åºä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</strong></p>
<p>10ã€æ‰¾åˆ°å«æœ‰requirepasså­—æ ·çš„åœ°æ–¹ï¼Œè¿½åŠ ä¸€è¡Œï¼Œè¾“å…¥requirepass 12345ã€‚è¿™æ˜¯è®¿é—®Redisæ—¶æ‰€éœ€çš„å¯†ç ï¼Œä¸€èˆ¬æµ‹è¯•æƒ…å†µä¸‹å¯ä»¥ä¸ç”¨è®¾å®šå¯†ç ã€‚ä¸è¿‡ï¼Œå³ä½¿æ˜¯ä½œä¸ºæœ¬åœ°è®¿é—®ï¼Œä¹Ÿå»ºè®®è®¾å®šä¸€ä¸ªå¯†ç ã€‚</p>
<p>11ã€ç‚¹å‡»â€œå¼€å§‹â€&gt;å³å‡»â€œè®¡ç®—æœºâ€&gt;é€‰æ‹©â€œç®¡ç†â€ã€‚åœ¨å·¦ä¾§æ ä¸­ä¾æ¬¡æ‰¾åˆ°å¹¶ç‚¹å‡»â€œè®¡ç®—æœºç®¡ç†ï¼ˆæœ¬åœ°ï¼‰â€&gt;æœåŠ¡å’Œåº”ç”¨ç¨‹åº&gt;æœåŠ¡ã€‚å†åœ¨å³ä¾§æ‰¾åˆ°Redisåç§°çš„æœåŠ¡ï¼ŒæŸ¥çœ‹å¯åŠ¨æƒ…å†µã€‚å¦‚æœªå¯åŠ¨ï¼Œåˆ™æ‰‹åŠ¨å¯åŠ¨ä¹‹ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡åº”è¯¥æ­£å¸¸å¯åŠ¨å¹¶è¿è¡Œäº†ã€‚</p>
<p>12ã€æœ€åæ¥æµ‹è¯•ä¸€ä¸‹Redisæ˜¯å¦æ­£å¸¸æä¾›æœåŠ¡ã€‚è¿›å…¥Redisçš„ç›®å½•ï¼Œcd C:\Program Files\Redisã€‚è¾“å…¥redis-cliå¹¶å›è½¦ã€‚ï¼ˆredis-cliæ˜¯å®¢æˆ·ç«¯ç¨‹åºï¼‰å¦‚å›¾æ­£å¸¸æç¤ºè¿›å…¥ï¼Œå¹¶æ˜¾ç¤ºæ­£ç¡®ç«¯å£å·ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡å·²ç»å¯åŠ¨ã€‚</p>
<p>13ã€ä½¿ç”¨æœåŠ¡å‰éœ€è¦å…ˆé€šè¿‡å¯†ç éªŒè¯ã€‚è¾“å…¥â€œauth 12345â€å¹¶å›è½¦ï¼ˆ12345æ˜¯ä¹‹å‰è®¾å®šçš„å¯†ç ï¼‰ã€‚è¿”å›æç¤ºOKè¡¨ç¤ºéªŒè¯é€šè¿‡ã€‚</p>
<p>14ã€å®é™…æµ‹è¯•ä¸€ä¸‹è¯»å†™ã€‚è¾“å…¥set mykey1 â€œI love you all!â€å¹¶å›è½¦ï¼Œç”¨æ¥ä¿å­˜ä¸€ä¸ªé”®å€¼ã€‚å†è¾“å…¥get mykey1ï¼Œè·å–åˆšæ‰ä¿å­˜çš„é”®å€¼ã€‚</p>
<p>15ã€æ³¨æ„äº‹é¡¹</p>
<ul>
<li>1.Windowsä½¿ç”¨çš„è¿™ä¸ªRedisæ˜¯64ä½ç‰ˆæœ¬çš„ï¼Œ32ä½æ“ä½œç³»ç»Ÿçš„åŒå­¦å°±ä¸è¦æŠ˜è…¾äº†ã€‚</li>
<li>2.<strong>ä½œä¸ºæœåŠ¡è¿è¡Œçš„Redisé…ç½®æ–‡ä»¶ï¼Œé€šå¸¸ä¸ºredis.windows-service.confï¼Œè€Œä¸æ˜¯redis.windows.confã€‚å°å¿ƒä¸è¦é€‰é”™äº†ã€‚</strong></li>
</ul>
<h2 id="æ”¯æŒçš„æ•°æ®ç±»å‹ï¼ˆ5å¤§æ•°æ®ç±»å‹ï¼‰"><a href="#æ”¯æŒçš„æ•°æ®ç±»å‹ï¼ˆ5å¤§æ•°æ®ç±»å‹ï¼‰" class="headerlink" title="æ”¯æŒçš„æ•°æ®ç±»å‹ï¼ˆ5å¤§æ•°æ®ç±»å‹ï¼‰"></a><strong>æ”¯æŒçš„æ•°æ®ç±»å‹ï¼ˆ5å¤§æ•°æ®ç±»å‹ï¼‰</strong></h2><h4 id="stringã€listã€setã€zsetã€hash"><a href="#stringã€listã€setã€zsetã€hash" class="headerlink" title="stringã€listã€setã€zsetã€hash"></a>stringã€listã€setã€zsetã€hash</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis=&#123;</span><br><span class="line">        k1:<span class="string">&#x27;123&#x27;</span>,      å­—ç¬¦ä¸²</span><br><span class="line">        k2:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],   åˆ—è¡¨/æ•°ç»„</span><br><span class="line">        k3:&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;     é›†åˆ</span><br><span class="line">        k4:&#123;name:lucky,age:<span class="number">18</span>&#125;  å­—å…¸/å“ˆå¸Œè¡¨</span><br><span class="line">        k5:&#123;(<span class="string">&#x27;lucky&#x27;</span>,<span class="number">18</span>),(<span class="string">&#x27;tom&#x27;</span>,<span class="number">33</span>)&#125;  æœ‰åºé›†åˆ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç‰¹ç‚¹ï¼š"><a href="#ç‰¹ç‚¹ï¼š" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a><strong>ç‰¹ç‚¹ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥æŒä¹…åŒ–</span><br><span class="line">å•çº¿ç¨‹ï¼Œå•è¿›ç¨‹</span><br></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>Stringæ“ä½œï¼Œredisä¸­çš„Stringåœ¨åœ¨å†…å­˜ä¸­æŒ‰ç…§ä¸€ä¸ªnameå¯¹åº”ä¸€ä¸ªvalueæ¥å­˜å‚¨ã€‚å¦‚å›¾ï¼š</p>
<p><img src="img/35467646745.png" alt="35467646745"></p>
<p><strong>set(name, value, ex=None, px=None, nx=False, xx=False)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åœ¨Redisä¸­è®¾ç½®å€¼ï¼Œé»˜è®¤ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™ä¿®æ”¹</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">     exï¼Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="line">     pxï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line">     nxï¼Œå¦‚æœè®¾ç½®ä¸º<span class="literal">True</span>ï¼Œåˆ™åªæœ‰nameä¸å­˜åœ¨æ—¶ï¼Œå½“å‰<span class="built_in">set</span>æ“ä½œæ‰æ‰§è¡Œ,å€¼å­˜åœ¨ï¼Œå°±ä¿®æ”¹ä¸äº†ï¼Œæ‰§è¡Œæ²¡æ•ˆæœ</span><br><span class="line">     xxï¼Œå¦‚æœè®¾ç½®ä¸º<span class="literal">True</span>ï¼Œåˆ™åªæœ‰nameå­˜åœ¨æ—¶ï¼Œå½“å‰<span class="built_in">set</span>æ“ä½œæ‰æ‰§è¡Œï¼Œå€¼å­˜åœ¨æ‰èƒ½ä¿®æ”¹ï¼Œå€¼ä¸å­˜åœ¨ï¼Œä¸ä¼šè®¾ç½®æ–°å€¼</span><br></pre></td></tr></table></figure>

<p><strong>setnx(name, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®å€¼ï¼Œåªæœ‰nameä¸å­˜åœ¨æ—¶ï¼Œæ‰§è¡Œè®¾ç½®æ“ä½œï¼ˆæ·»åŠ ï¼‰,å¦‚æœå­˜åœ¨ï¼Œä¸ä¼šä¿®æ”¹</span><br></pre></td></tr></table></figure>

<p><strong>setex(name, value, time)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å€¼</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># timeï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ•°å­—ç§’ æˆ– timedeltaå¯¹è±¡ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>psetex(name, time_ms, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å€¼</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># time_msï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ•°å­—æ¯«ç§’ æˆ– timedeltaå¯¹è±¡</span></span><br></pre></td></tr></table></figure>

<p>*<em>mset(*args, *<em>kwargs)</em></em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ‰¹é‡è®¾ç½®å€¼</span><br><span class="line">å¦‚ï¼š</span><br><span class="line">    mset(k1=<span class="string">&#x27;v1&#x27;</span>, k2=<span class="string">&#x27;v2&#x27;</span>)</span><br><span class="line">    æˆ–</span><br><span class="line">    mget(&#123;<span class="string">&#x27;k1&#x27;</span>: <span class="string">&#x27;v1&#x27;</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="string">&#x27;v2&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>get(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è·å–å€¼</span><br></pre></td></tr></table></figure>

<p><strong>mget(keys, *args)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ‰¹é‡è·å–</span><br><span class="line">å¦‚ï¼š</span><br><span class="line">    mget(<span class="string">&#x27;k1&#x27;</span>, <span class="string">&#x27;k2&#x27;</span>)</span><br><span class="line">    æˆ–</span><br><span class="line">    r.mget([<span class="string">&#x27;k3&#x27;</span>, <span class="string">&#x27;k4&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p><strong>getset(name, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¹¶è·å–åŸæ¥çš„å€¼å¹¶è®¾ç½®æ–°å€¼</span><br></pre></td></tr></table></figure>

<p><strong>getrange(key, start, end)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å­åºåˆ—ï¼ˆæ ¹æ®å­—èŠ‚è·å–ï¼Œéå­—ç¬¦ï¼‰</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼ŒRedis çš„ name</span></span><br><span class="line">    <span class="comment"># startï¼Œèµ·å§‹ä½ç½®ï¼ˆå­—èŠ‚ï¼‰</span></span><br><span class="line">    <span class="comment"># endï¼Œç»“æŸä½ç½®ï¼ˆå­—èŠ‚ï¼‰</span></span><br><span class="line"><span class="comment"># å¦‚ï¼š &quot;å°æ—&quot; ï¼Œ0-3è¡¨ç¤º &quot;å°&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>setrange(name, offset, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹ï¼Œä»æŒ‡å®šå­—ç¬¦ä¸²ç´¢å¼•å¼€å§‹å‘åæ›¿æ¢ï¼ˆæ–°å€¼å¤ªé•¿æ—¶ï¼Œåˆ™å‘åæ·»åŠ ï¼‰</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># offsetï¼Œå­—ç¬¦ä¸²çš„ç´¢å¼•ï¼Œå­—èŠ‚ï¼ˆä¸€ä¸ªæ±‰å­—ä¸‰ä¸ªå­—èŠ‚ï¼‰</span></span><br><span class="line">    <span class="comment"># valueï¼Œè¦è®¾ç½®çš„å€¼</span></span><br></pre></td></tr></table></figure>

<p><strong>setbit(name, offset, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹nameå¯¹åº”å€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„ä½è¿›è¡Œæ“ä½œ</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># offsetï¼Œä½çš„ç´¢å¼•ï¼ˆå°†å€¼å˜æ¢æˆäºŒè¿›åˆ¶åå†è¿›è¡Œç´¢å¼•ï¼‰</span></span><br><span class="line">    <span class="comment"># valueï¼Œå€¼åªèƒ½æ˜¯ 1 æˆ– 0</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ³¨ï¼šå¦‚æœåœ¨Redisä¸­æœ‰ä¸€ä¸ªå¯¹åº”ï¼š n1 = &quot;foo&quot;ï¼Œ</span></span><br><span class="line">        é‚£ä¹ˆå­—ç¬¦ä¸²fooçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š01100110 01101111 01101111</span><br><span class="line">    æ‰€ä»¥ï¼Œå¦‚æœæ‰§è¡Œ setbit(<span class="string">&#x27;n1&#x27;</span>, <span class="number">7</span>, <span class="number">1</span>)ï¼Œåˆ™å°±ä¼šå°†ç¬¬<span class="number">7</span>ä½è®¾ç½®ä¸º<span class="number">1</span>ï¼Œ</span><br><span class="line">        é‚£ä¹ˆæœ€ç»ˆäºŒè¿›åˆ¶åˆ™å˜æˆ 01100111 01101111 01101111ï¼Œå³ï¼š<span class="string">&quot;goo&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>getbit(name, offset)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”çš„å€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æŸä½çš„å€¼ ï¼ˆ0æˆ–1ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>bitcount(key, start=None, end=None)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”çš„å€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># keyï¼ŒRedisçš„name</span></span><br><span class="line">    <span class="comment"># startï¼Œä½èµ·å§‹ä½ç½®</span></span><br><span class="line">    <span class="comment"># endï¼Œä½ç»“æŸä½ç½®</span></span><br></pre></td></tr></table></figure>

<p><strong>bitop(operation, dest, *keys)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å¤šä¸ªå€¼ï¼Œå¹¶å°†å€¼åšä½è¿ç®—ï¼Œå°†æœ€åçš„ç»“æœä¿å­˜è‡³æ–°çš„nameå¯¹åº”çš„å€¼</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># operation,ANDï¼ˆå¹¶ï¼‰ ã€ ORï¼ˆæˆ–ï¼‰ ã€ NOTï¼ˆéï¼‰ ã€ XORï¼ˆå¼‚æˆ–ï¼‰</span></span><br><span class="line">    <span class="comment"># dest, æ–°çš„Redisçš„name</span></span><br><span class="line">    <span class="comment"># *keys,è¦æŸ¥æ‰¾çš„Redisçš„name</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¦‚ï¼š</span></span><br><span class="line">    bitop(<span class="string">&quot;AND&quot;</span>, <span class="string">&#x27;new_name&#x27;</span>, <span class="string">&#x27;n1&#x27;</span>, <span class="string">&#x27;n2&#x27;</span>, <span class="string">&#x27;n3&#x27;</span>)</span><br><span class="line">    <span class="comment"># è·å–Redisä¸­n1,n2,n3å¯¹åº”çš„å€¼ï¼Œç„¶åè®²æ‰€æœ‰çš„å€¼åšä½è¿ç®—ï¼ˆæ±‚å¹¶é›†ï¼‰ï¼Œç„¶åå°†ç»“æœä¿å­˜ new_name å¯¹åº”çš„å€¼ä¸­</span></span><br></pre></td></tr></table></figure>

<p><strong>strlen(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›nameå¯¹åº”å€¼çš„å­—èŠ‚é•¿åº¦ï¼ˆä¸€ä¸ªæ±‰å­—3ä¸ªå­—èŠ‚ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>incr(self, name, amount=1)</strong>    ç»Ÿè®¡ç½‘ç«™è®¿é—®é‡ï¼Œé¡µé¢è®¿é—®é‡ï¼Œæ¥å£è®¿é—®é‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå¢ nameå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå¢ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># name,Redisçš„name</span></span><br><span class="line">    <span class="comment"># amount,è‡ªå¢æ•°ï¼ˆå¿…é¡»æ˜¯æ•´æ•°ï¼‰</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ³¨ï¼šåŒincrby</span></span><br></pre></td></tr></table></figure>

<p><strong>incrbyfloat(self, name, amount=1.0)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå¢ nameå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå¢ã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># name,Redisçš„name</span></span><br><span class="line">    <span class="comment"># amount,è‡ªå¢æ•°ï¼ˆæµ®ç‚¹å‹ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>decr(self, name, amount=1)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå‡ nameå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå‡ã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># name,Redisçš„name</span></span><br><span class="line">    <span class="comment"># amount,è‡ªå‡æ•°ï¼ˆæ•´æ•°ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>append(key, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨redis nameå¯¹åº”çš„å€¼åé¢è¿½åŠ å†…å®¹</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    key, redisçš„name</span><br><span class="line">    value, è¦è¿½åŠ çš„å­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>

<h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>Hashæ“ä½œï¼Œredisä¸­Hashåœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ ¼å¼å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="../img/006tNbRwgy1ga7otagi3lj30p00f2q8l.jpg" alt="006tNbRwgy1ga7otagi3lj30p00f2q8l"></p>
<p><strong>hset(name, key, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nameå¯¹åº”çš„hashä¸­è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ï¼ˆä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›å¦åˆ™ï¼Œä¿®æ”¹ï¼‰</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># keyï¼Œnameå¯¹åº”çš„hashä¸­çš„key</span></span><br><span class="line">    <span class="comment"># valueï¼Œnameå¯¹åº”çš„hashä¸­çš„value</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ³¨ï¼š</span></span><br><span class="line">    <span class="comment"># hsetnx(name, key, value),å½“nameå¯¹åº”çš„hashä¸­ä¸å­˜åœ¨å½“å‰keyæ—¶åˆ™åˆ›å»ºï¼ˆç›¸å½“äºæ·»åŠ ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>hmset(name, mapping)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„hashä¸­æ‰¹é‡è®¾ç½®é”®å€¼å¯¹</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># mappingï¼Œå­—å…¸ï¼Œå¦‚ï¼š&#123;&#x27;k1&#x27;:&#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¦‚ï¼š</span></span><br><span class="line">    <span class="comment"># r.hmset(&#x27;xx&#x27;, &#123;&#x27;k1&#x27;:&#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;&#125;)</span></span><br></pre></td></tr></table></figure>

<p><strong>hget(name,key)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„hashä¸­è·å–æ ¹æ®keyè·å–value</span></span><br></pre></td></tr></table></figure>

<p><strong>hmget(name, keys, *args)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„hashä¸­è·å–å¤šä¸ªkeyçš„å€¼</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œreidså¯¹åº”çš„name</span></span><br><span class="line">    <span class="comment"># keysï¼Œè¦è·å–keyé›†åˆï¼Œå¦‚ï¼š[&#x27;k1&#x27;, &#x27;k2&#x27;, &#x27;k3&#x27;]</span></span><br><span class="line">    <span class="comment"># *argsï¼Œè¦è·å–çš„keyï¼Œå¦‚ï¼šk1,k2,k3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¦‚ï¼š</span></span><br><span class="line">    <span class="comment"># r.mget(&#x27;xx&#x27;, [&#x27;k1&#x27;, &#x27;k2&#x27;])</span></span><br><span class="line">    <span class="comment"># æˆ–</span></span><br><span class="line">    <span class="comment"># print r.hmget(&#x27;xx&#x27;, &#x27;k1&#x27;, &#x27;k2&#x27;)</span></span><br></pre></td></tr></table></figure>

<p><strong>hgetall(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”hashçš„æ‰€æœ‰é”®å€¼</span></span><br><span class="line"><span class="built_in">print</span>(re.hgetall(<span class="string">&#x27;xxx&#x27;</span>).get(<span class="string">b&#x27;name&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><strong>hlen(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”çš„hashä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>

<p><strong>hkeys(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”çš„hashä¸­æ‰€æœ‰çš„keyçš„å€¼</span></span><br></pre></td></tr></table></figure>

<p><strong>hvals(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”çš„hashä¸­æ‰€æœ‰çš„valueçš„å€¼</span></span><br></pre></td></tr></table></figure>

<p><strong>hexists(name, key)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥nameå¯¹åº”çš„hashæ˜¯å¦å­˜åœ¨å½“å‰ä¼ å…¥çš„key</span></span><br></pre></td></tr></table></figure>

<p><strong>hdel(name,*keys)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†nameå¯¹åº”çš„hashä¸­æŒ‡å®škeyçš„é”®å€¼å¯¹åˆ é™¤</span></span><br><span class="line"><span class="built_in">print</span>(re.hdel(<span class="string">&#x27;xxx&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>,<span class="string">&#x27;name&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><strong>hincrby(name, key, amount=1)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå¢nameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisä¸­çš„name</span></span><br><span class="line">    <span class="comment"># keyï¼Œ hashå¯¹åº”çš„key</span></span><br><span class="line">    <span class="comment"># amountï¼Œè‡ªå¢æ•°ï¼ˆæ•´æ•°ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>hincrbyfloat(name, key, amount=1.0)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå¢nameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisä¸­çš„name</span></span><br><span class="line">    <span class="comment"># keyï¼Œ hashå¯¹åº”çš„key</span></span><br><span class="line">    <span class="comment"># amountï¼Œè‡ªå¢æ•°ï¼ˆæµ®ç‚¹æ•°ï¼‰</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># è‡ªå¢nameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount</span></span><br></pre></td></tr></table></figure>

<p><strong>hscan(name, cursor=0, match=None, count=None)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¢é‡å¼è¿­ä»£è·å–ï¼Œå¯¹äºæ•°æ®å¤§çš„æ•°æ®éå¸¸æœ‰ç”¨ï¼Œhscanå¯ä»¥å®ç°åˆ†ç‰‡çš„è·å–æ•°æ®ï¼Œå¹¶éä¸€æ¬¡æ€§å°†æ•°æ®å…¨éƒ¨è·å–å®Œï¼Œä»è€Œæ”¾ç½®å†…å­˜è¢«æ’‘çˆ†</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># cursorï¼Œæ¸¸æ ‡ï¼ˆåŸºäºæ¸¸æ ‡åˆ†æ‰¹å–è·å–æ•°æ®ï¼‰</span></span><br><span class="line">    <span class="comment"># matchï¼ŒåŒ¹é…æŒ‡å®škeyï¼Œé»˜è®¤None è¡¨ç¤ºæ‰€æœ‰çš„key</span></span><br><span class="line">    <span class="comment"># countï¼Œæ¯æ¬¡åˆ†ç‰‡æœ€å°‘è·å–ä¸ªæ•°ï¼Œé»˜è®¤Noneè¡¨ç¤ºé‡‡ç”¨Redisçš„é»˜è®¤åˆ†ç‰‡ä¸ªæ•°</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¦‚ï¼š</span></span><br><span class="line">    <span class="comment"># ç¬¬ä¸€æ¬¡ï¼šcursor1, data1 = r.hscan(&#x27;xx&#x27;, cursor=0, match=None, count=None)</span></span><br><span class="line">    <span class="comment"># ç¬¬äºŒæ¬¡ï¼šcursor2, data1 = r.hscan(&#x27;xx&#x27;, cursor=cursor1, match=None, count=None)</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="comment"># ç›´åˆ°è¿”å›å€¼cursorçš„å€¼ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ•°æ®å·²ç»é€šè¿‡åˆ†ç‰‡è·å–å®Œæ¯•</span></span><br></pre></td></tr></table></figure>

<p><strong>hscan_iter(name, match=None, count=None)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ©ç”¨yieldå°è£…hscanåˆ›å»ºç”Ÿæˆå™¨ï¼Œå®ç°åˆ†æ‰¹å»redisä¸­è·å–æ•°æ®</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># matchï¼ŒåŒ¹é…æŒ‡å®škeyï¼Œé»˜è®¤None è¡¨ç¤ºæ‰€æœ‰çš„key</span></span><br><span class="line">    <span class="comment"># countï¼Œæ¯æ¬¡åˆ†ç‰‡æœ€å°‘è·å–ä¸ªæ•°ï¼Œé»˜è®¤Noneè¡¨ç¤ºé‡‡ç”¨Redisçš„é»˜è®¤åˆ†ç‰‡ä¸ªæ•°</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¦‚ï¼š</span></span><br><span class="line">    <span class="comment"># for item in r.hscan_iter(&#x27;xx&#x27;):</span></span><br><span class="line">    <span class="comment">#     print item</span></span><br></pre></td></tr></table></figure>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>Listæ“ä½œï¼Œredisä¸­çš„Liståœ¨åœ¨å†…å­˜ä¸­æŒ‰ç…§ä¸€ä¸ªnameå¯¹åº”ä¸€ä¸ªListæ¥å­˜å‚¨ã€‚å¦‚å›¾ï¼š</p>
<p><img src="img/1350514-20181022211822785-370585666.png" alt="1350514-20181022211822785-370585666"></p>
<p><strong>lpush(name,values)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„listä¸­æ·»åŠ å…ƒç´ ï¼Œæ¯ä¸ªæ–°çš„å…ƒç´ éƒ½æ·»åŠ åˆ°åˆ—è¡¨çš„æœ€å·¦è¾¹</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¦‚ï¼š</span></span><br><span class="line">    <span class="comment"># r.lpush(&#x27;oo&#x27;, 11,22,33)</span></span><br><span class="line">    <span class="comment"># ä¿å­˜é¡ºåºä¸º: 33,22,11</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ‰©å±•ï¼š</span></span><br><span class="line">    <span class="comment"># rpush(name, values) è¡¨ç¤ºä»å³å‘å·¦æ“ä½œ</span></span><br></pre></td></tr></table></figure>

<p><strong>lpushx(name,value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„listä¸­æ·»åŠ å…ƒç´ ï¼Œåªæœ‰nameå·²ç»å­˜åœ¨æ—¶ï¼Œå€¼æ·»åŠ åˆ°åˆ—è¡¨çš„æœ€å·¦è¾¹</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ›´å¤šï¼š</span></span><br><span class="line">    <span class="comment"># rpushx(name, value) è¡¨ç¤ºä»å³å‘å·¦æ“ä½œ</span></span><br></pre></td></tr></table></figure>

<p><strong>llen(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nameå¯¹åº”çš„listå…ƒç´ çš„ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>

<p><strong>linsert(name, where, refvalue, value))</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨çš„æŸä¸€ä¸ªå€¼å‰æˆ–åæ’å…¥ä¸€ä¸ªæ–°å€¼</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># whereï¼ŒBEFOREæˆ–AFTER(å°å†™ä¹Ÿå¯ä»¥)</span></span><br><span class="line">    <span class="comment"># refvalueï¼Œæ ‡æ†å€¼ï¼Œå³ï¼šåœ¨å®ƒå‰åæ’å…¥æ•°æ®ï¼ˆå¦‚æœå­˜åœ¨å¤šä¸ªæ ‡æ†å€¼ï¼Œä»¥æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªä¸ºå‡†ï¼‰</span></span><br><span class="line">    <span class="comment"># valueï¼Œè¦æ’å…¥çš„æ•°æ®</span></span><br></pre></td></tr></table></figure>

<p><strong>r.lset(name, index, value)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹nameå¯¹åº”çš„listä¸­çš„æŸä¸€ä¸ªç´¢å¼•ä½ç½®é‡æ–°èµ‹å€¼</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># indexï¼Œlistçš„ç´¢å¼•ä½ç½®</span></span><br><span class="line">    <span class="comment"># valueï¼Œè¦è®¾ç½®çš„å€¼</span></span><br></pre></td></tr></table></figure>

<p><strong>r.lrem(name, value, num)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„listä¸­åˆ é™¤æŒ‡å®šçš„å€¼</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># valueï¼Œè¦åˆ é™¤çš„å€¼</span></span><br><span class="line">    <span class="comment"># numï¼Œ  num=0ï¼Œåˆ é™¤åˆ—è¡¨ä¸­æ‰€æœ‰çš„æŒ‡å®šå€¼ï¼›</span></span><br><span class="line">           <span class="comment"># num=2,ä»å‰åˆ°åï¼Œåˆ é™¤2ä¸ªï¼›</span></span><br><span class="line">           <span class="comment"># num=-2,ä»åå‘å‰ï¼Œåˆ é™¤2ä¸ª</span></span><br></pre></td></tr></table></figure>

<p><strong>lpop(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨çš„å·¦ä¾§è·å–ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶åœ¨åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿”å›å€¼åˆ™æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ›´å¤šï¼š</span></span><br><span class="line">    <span class="comment"># rpop(name) è¡¨ç¤ºä»å³å‘å·¦æ“ä½œ</span></span><br></pre></td></tr></table></figure>

<p><strong>lindex(name, index)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨nameå¯¹åº”çš„åˆ—è¡¨ä¸­æ ¹æ®ç´¢å¼•è·å–åˆ—è¡¨å…ƒç´ </span><br></pre></td></tr></table></figure>

<p><strong>lrange(name, start, end)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨åˆ†ç‰‡è·å–æ•°æ®</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># startï¼Œç´¢å¼•çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">    <span class="comment"># endï¼Œç´¢å¼•ç»“æŸä½ç½®  print(re.lrange(&#x27;aa&#x27;,0,re.llen(&#x27;aa&#x27;)))</span></span><br></pre></td></tr></table></figure>

<p><strong>ltrim(name, start, end)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨nameå¯¹åº”çš„åˆ—è¡¨ä¸­ç§»é™¤æ²¡æœ‰åœ¨start-endç´¢å¼•ä¹‹é—´çš„å€¼</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># nameï¼Œredisçš„name</span></span><br><span class="line">    <span class="comment"># startï¼Œç´¢å¼•çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">    <span class="comment"># endï¼Œç´¢å¼•ç»“æŸä½ç½®ï¼ˆå¤§äºåˆ—è¡¨é•¿åº¦ï¼Œåˆ™ä»£è¡¨ä¸ç§»é™¤ä»»ä½•ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>rpoplpush(src, dst)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»ä¸€ä¸ªåˆ—è¡¨å–å‡ºæœ€å³è¾¹çš„å…ƒç´ ï¼ŒåŒæ—¶å°†å…¶æ·»åŠ è‡³å¦ä¸€ä¸ªåˆ—è¡¨çš„æœ€å·¦è¾¹</span></span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># srcï¼Œè¦å–æ•°æ®çš„åˆ—è¡¨çš„name</span></span><br><span class="line">    <span class="comment"># dstï¼Œè¦æ·»åŠ æ•°æ®çš„åˆ—è¡¨çš„name</span></span><br></pre></td></tr></table></figure>

<p><strong>blpop(keys, timeout)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†å¤šä¸ªåˆ—è¡¨æ’åˆ—ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³å»popå¯¹åº”åˆ—è¡¨çš„å…ƒç´ </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># keysï¼Œredisçš„nameçš„é›†åˆ</span></span><br><span class="line">    <span class="comment"># timeoutï¼Œè¶…æ—¶æ—¶é—´ï¼Œå½“å…ƒç´ æ‰€æœ‰åˆ—è¡¨çš„å…ƒç´ è·å–å®Œä¹‹åï¼Œé˜»å¡ç­‰å¾…åˆ—è¡¨å†…æœ‰æ•°æ®çš„æ—¶é—´ï¼ˆç§’ï¼‰, 0 è¡¨ç¤ºæ°¸è¿œé˜»å¡</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ›´å¤šï¼š</span></span><br><span class="line">    <span class="comment"># r.brpop(keys, timeout)ï¼Œä»å³å‘å·¦è·å–æ•°æ®çˆ¬è™«å®ç°ç®€å•åˆ†å¸ƒå¼ï¼šå¤šä¸ªurlæ”¾åˆ°åˆ—è¡¨é‡Œï¼Œå¾€é‡Œä¸åœæ”¾URLï¼Œç¨‹åºå¾ªç¯å–å€¼ï¼Œä½†æ˜¯åªèƒ½ä¸€å°æœºå™¨è¿è¡Œå–å€¼ï¼Œå¯ä»¥æŠŠurlæ”¾åˆ°redisä¸­ï¼Œå¤šå°æœºå™¨ä»redisä¸­å–å€¼ï¼Œçˆ¬å–æ•°æ®ï¼Œå®ç°ç®€å•åˆ†å¸ƒå¼</span></span><br></pre></td></tr></table></figure>

<p><strong>brpoplpush(src, dst, timeout=0)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»ä¸€ä¸ªåˆ—è¡¨çš„å³ä¾§ç§»é™¤ä¸€ä¸ªå…ƒç´ å¹¶å°†å…¶æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦ä¾§</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># srcï¼Œå–å‡ºå¹¶è¦ç§»é™¤å…ƒç´ çš„åˆ—è¡¨å¯¹åº”çš„name</span></span><br><span class="line">    <span class="comment"># dstï¼Œè¦æ’å…¥å…ƒç´ çš„åˆ—è¡¨å¯¹åº”çš„name</span></span><br><span class="line">    <span class="comment"># timeoutï¼Œå½“srcå¯¹åº”çš„åˆ—è¡¨ä¸­æ²¡æœ‰æ•°æ®æ—¶ï¼Œé˜»å¡ç­‰å¾…å…¶æœ‰æ•°æ®çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œ0 è¡¨ç¤ºæ°¸è¿œé˜»å¡</span></span><br></pre></td></tr></table></figure>

<p><strong>è‡ªå®šä¹‰å¢é‡è¿­ä»£</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”±äºredisç±»åº“ä¸­æ²¡æœ‰æä¾›å¯¹åˆ—è¡¨å…ƒç´ çš„å¢é‡è¿­ä»£ï¼Œå¦‚æœæƒ³è¦å¾ªç¯nameå¯¹åº”çš„åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆå°±éœ€è¦ï¼š</span></span><br><span class="line">    <span class="comment"># 1ã€è·å–nameå¯¹åº”çš„æ‰€æœ‰åˆ—è¡¨</span></span><br><span class="line">    <span class="comment"># 2ã€å¾ªç¯åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯ï¼Œå¦‚æœåˆ—è¡¨éå¸¸å¤§ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åœ¨ç¬¬ä¸€æ­¥æ—¶å°±å°†ç¨‹åºçš„å†…å®¹æ’‘çˆ†ï¼Œæ‰€æœ‰æœ‰å¿…è¦è‡ªå®šä¹‰ä¸€ä¸ªå¢é‡è¿­ä»£çš„åŠŸèƒ½ï¼š</span></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line">conn=redis.Redis(host=<span class="string">&#x27;127.0.0.1&#x27;</span>,port=<span class="number">6379</span>)</span><br><span class="line"><span class="comment"># conn.lpush(&#x27;test&#x27;,*[1,2,3,4,45,5,6,7,7,8,43,5,6,768,89,9,65,4,23,54,6757,8,68])</span></span><br><span class="line"><span class="comment"># conn.flushall()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">scan_list</span>(<span class="params">name,count=<span class="number">2</span></span>):</span><br><span class="line">    index=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data_list=conn.lrange(name,index,count+index-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data_list:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        index+=count</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line"><span class="built_in">print</span>(conn.lrange(<span class="string">&#x27;test&#x27;</span>,<span class="number">0</span>,<span class="number">100</span>))</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> scan_list(<span class="string">&#x27;test&#x27;</span>,<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;---&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure>

<h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><p>æ— åºï¼Œæ— é‡å¤ï¼Œé›†åˆé—´æ“ä½œï¼ˆäº¤å‰å¹¶è¡¥ï¼‰ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sadd key element <span class="comment">#å‘é›†åˆkeyæ·»åŠ elementï¼ˆå¦‚æœelementå­˜åœ¨ï¼Œæ·»åŠ å¤±è´¥ï¼‰ o(1)</span></span><br><span class="line"></span><br><span class="line">srem key element <span class="comment">#ä»é›†åˆä¸­çš„elementç§»é™¤æ‰ o(1)</span></span><br><span class="line"></span><br><span class="line">scard key <span class="comment">#è®¡ç®—é›†åˆå¤§å°</span></span><br><span class="line"></span><br><span class="line">sismember key element <span class="comment">#åˆ¤æ–­elementæ˜¯å¦åœ¨é›†åˆä¸­</span></span><br><span class="line"></span><br><span class="line">srandmember key count <span class="comment">#ä»é›†åˆä¸­éšæœºå–å‡ºcountä¸ªå…ƒç´ ï¼Œä¸ä¼šç ´åé›†åˆä¸­çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">spop key <span class="comment">#ä»é›†åˆä¸­éšæœºå¼¹å‡ºä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"></span><br><span class="line">smembers key <span class="comment">#è·å–é›†åˆä¸­æ‰€æœ‰å…ƒç´  ï¼Œæ— åºï¼Œå°å¿ƒä½¿ç”¨ï¼Œä¼šé˜»å¡ä½ </span></span><br><span class="line"></span><br><span class="line">sdiff user:<span class="number">1</span>:follow user:<span class="number">2</span>:follow  <span class="comment">#è®¡ç®—user:1:followå’Œuser:2:followçš„å·®é›†</span></span><br><span class="line"></span><br><span class="line">sinter user:<span class="number">1</span>:follow user:<span class="number">2</span>:follow  <span class="comment">#è®¡ç®—user:1:followå’Œuser:2:followçš„äº¤é›†</span></span><br><span class="line">          </span><br><span class="line">sunion user:<span class="number">1</span>:follow user:<span class="number">2</span>:follow  <span class="comment">#è®¡ç®—user:1:followå’Œuser:2:followçš„å¹¶é›†</span></span><br><span class="line">                </span><br><span class="line">sdiff|sinter|suion + store destkey... <span class="comment">#å°†å·®é›†ï¼Œäº¤é›†ï¼Œå¹¶é›†ç»“æœä¿å­˜åœ¨destkeyé›†åˆä¸­</span></span><br></pre></td></tr></table></figure>

<h2 id="zset"><a href="#zset" class="headerlink" title="zset"></a>zset</h2><h5 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æœ‰ä¸€ä¸ªåˆ†å€¼å­—æ®µï¼Œæ¥ä¿è¯é¡ºåº</span></span><br><span class="line">key                  score                value</span><br><span class="line">user:ranking           <span class="number">1</span>                   lqz</span><br><span class="line">user:ranking           <span class="number">99</span>                  lqz2</span><br><span class="line">user:ranking           <span class="number">88</span>                  lqz3</span><br><span class="line"><span class="comment">#é›†åˆæœ‰åºé›†åˆ</span></span><br><span class="line">é›†åˆï¼šæ— é‡å¤å…ƒç´ ï¼Œæ— åºï¼Œelement</span><br><span class="line">æœ‰åºé›†åˆï¼šæ— é‡å¤å…ƒç´ ï¼Œæœ‰åºï¼Œelement+score</span><br><span class="line"><span class="comment">#åˆ—è¡¨å’Œæœ‰åºé›†åˆ</span></span><br><span class="line">åˆ—è¡¨ï¼šå¯ä»¥é‡å¤ï¼Œæœ‰åºï¼Œelement</span><br><span class="line">æœ‰åºé›†åˆï¼šæ— é‡å¤å…ƒç´ ï¼Œæœ‰åºï¼Œelement+score</span><br></pre></td></tr></table></figure>

<h5 id="APIä½¿ç”¨"><a href="#APIä½¿ç”¨" class="headerlink" title="APIä½¿ç”¨"></a>APIä½¿ç”¨</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">zadd key score element <span class="comment">#scoreå¯ä»¥é‡å¤ï¼Œå¯ä»¥å¤šä¸ªåŒæ—¶æ·»åŠ ï¼Œelementä¸èƒ½é‡å¤ o(logN) </span></span><br><span class="line"></span><br><span class="line">zrem key element <span class="comment">#åˆ é™¤å…ƒç´ ï¼Œå¯ä»¥å¤šä¸ªåŒæ—¶åˆ é™¤ o(1)</span></span><br><span class="line"></span><br><span class="line">zscore key element <span class="comment">#è·å–å…ƒç´ çš„åˆ†æ•° o(1)</span></span><br><span class="line"></span><br><span class="line">zincrby key increScore element <span class="comment">#å¢åŠ æˆ–å‡å°‘å…ƒç´ çš„åˆ†æ•°  o(1)</span></span><br><span class="line"></span><br><span class="line">zcard key <span class="comment">#è¿”å›å…ƒç´ æ€»ä¸ªæ•° o(1)</span></span><br><span class="line"></span><br><span class="line">zrank key element <span class="comment">#è¿”å›elementå…ƒç´ çš„æ’åï¼ˆä»å°åˆ°å¤§æ’ï¼‰</span></span><br><span class="line"></span><br><span class="line">zrange key <span class="number">0</span> -<span class="number">1</span> <span class="comment">#è¿”å›æ’åï¼Œä¸å¸¦åˆ†æ•°  o(log(n)+m) næ˜¯å…ƒç´ ä¸ªæ•°ï¼Œmæ˜¯è¦è·å–çš„å€¼</span></span><br><span class="line">zrange player:rank <span class="number">0</span> -<span class="number">1</span> withscores <span class="comment">#è¿”å›æ’åï¼Œå¸¦åˆ†æ•°</span></span><br><span class="line"></span><br><span class="line">zrangebyscore key minScore maxScore <span class="comment">#è¿”å›æŒ‡å®šåˆ†æ•°èŒƒå›´å†…çš„å‡åºå…ƒç´  o(log(n)+m) næ˜¯å…ƒç´ ä¸ªæ•°ï¼Œmæ˜¯è¦è·å–çš„å€¼</span></span><br><span class="line">zrangebyscore user:<span class="number">1</span>:ranking <span class="number">90</span> <span class="number">210</span> withscores <span class="comment">#è·å–90åˆ†åˆ°210åˆ†çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">zcount key minScore maxScore <span class="comment">#è¿”å›æœ‰åºé›†åˆå†…åœ¨æŒ‡å®šåˆ†æ•°èŒƒå›´å†…çš„ä¸ªæ•° o(log(n)+m)</span></span><br><span class="line"></span><br><span class="line">zremrangebyrank key start end <span class="comment">#åˆ é™¤æŒ‡å®šæ’åå†…çš„å‡åºå…ƒç´  o(log(n)+m)</span></span><br><span class="line">zremrangebyrank user:<span class="number">1</span>:rangking <span class="number">1</span> <span class="number">2</span> <span class="comment">#åˆ é™¤å‡åºæ’åä¸­1åˆ°2çš„å…ƒç´ </span></span><br><span class="line">        </span><br><span class="line">zremrangebyscore key minScore maxScore <span class="comment">#åˆ é™¤æŒ‡å®šåˆ†æ•°å†…çš„å‡åºå…ƒç´  o(log(n)+m)</span></span><br><span class="line">zremrangebyscore user:<span class="number">1</span>:ranking <span class="number">90</span> <span class="number">210</span> <span class="comment">#åˆ é™¤åˆ†æ•°90åˆ°210ä¹‹é—´çš„å…ƒç´ </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Pythonæ“ä½œRedisä¹‹å®‰è£…å’Œæ”¯æŒå­˜å‚¨ç±»å‹"><a href="#Pythonæ“ä½œRedisä¹‹å®‰è£…å’Œæ”¯æŒå­˜å‚¨ç±»å‹" class="headerlink" title="Pythonæ“ä½œRedisä¹‹å®‰è£…å’Œæ”¯æŒå­˜å‚¨ç±»å‹"></a>Pythonæ“ä½œRedisä¹‹å®‰è£…å’Œæ”¯æŒå­˜å‚¨ç±»å‹</h2><p><strong>å®‰è£…redisæ¨¡å—</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install redis</span><br></pre></td></tr></table></figure>

<h2 id="Pythonæ“ä½œRedisä¹‹æ™®é€šè¿æ¥"><a href="#Pythonæ“ä½œRedisä¹‹æ™®é€šè¿æ¥" class="headerlink" title="Pythonæ“ä½œRedisä¹‹æ™®é€šè¿æ¥"></a>Pythonæ“ä½œRedisä¹‹æ™®é€šè¿æ¥</h2><p>redis-pyæä¾›ä¸¤ä¸ªç±»Rediså’ŒStrictRedisç”¨äºå®ç°Redisçš„å‘½ä»¤ï¼ŒStrictRedisç”¨äºå®ç°å¤§éƒ¨åˆ†å®˜æ–¹çš„å‘½ä»¤ï¼Œå¹¶ä½¿ç”¨å®˜æ–¹çš„è¯­æ³•å’Œå‘½ä»¤ï¼ŒRedisæ˜¯StrictRedisçš„å­ç±»ï¼Œç”¨äºå‘åå…¼å®¹æ—§ç‰ˆæœ¬çš„redis-py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">r = redis.Redis(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line">r.<span class="built_in">set</span>(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(r.get(<span class="string">&#x27;foo&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="Pythonæ“ä½œRedisä¹‹è¿æ¥æ± "><a href="#Pythonæ“ä½œRedisä¹‹è¿æ¥æ± " class="headerlink" title="Pythonæ“ä½œRedisä¹‹è¿æ¥æ± "></a>Pythonæ“ä½œRedisä¹‹è¿æ¥æ± </h2><p>redis-pyä½¿ç”¨connection poolæ¥ç®¡ç†å¯¹ä¸€ä¸ªredis serverçš„æ‰€æœ‰è¿æ¥ï¼Œé¿å…æ¯æ¬¡å»ºç«‹ã€é‡Šæ”¾è¿æ¥çš„å¼€é”€ã€‚é»˜è®¤ï¼Œæ¯ä¸ªRediså®ä¾‹éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªè‡ªå·±çš„è¿æ¥æ± ã€‚å¯ä»¥ç›´æ¥å»ºç«‹ä¸€ä¸ªè¿æ¥æ± ï¼Œç„¶åä½œä¸ºå‚æ•°Redisï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å¤šä¸ªRediså®ä¾‹å…±äº«ä¸€ä¸ªè¿æ¥æ± </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line">r.<span class="built_in">set</span>(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(r.get(<span class="string">&#x27;foo&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒæ“ä½œ"><a href="#å…¶å®ƒæ“ä½œ" class="headerlink" title="å…¶å®ƒæ“ä½œ"></a>å…¶å®ƒæ“ä½œ</h2><p><strong>delete(*names)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®åˆ é™¤redisä¸­çš„ä»»æ„æ•°æ®ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p><strong>exists(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æµ‹redisçš„nameæ˜¯å¦å­˜åœ¨</span></span><br></pre></td></tr></table></figure>

<p><strong>keys(pattern=â€™*â€˜)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®æ¨¡å‹è·å–redisçš„name</span></span><br><span class="line"><span class="comment"># ret=conn.keys(&#x27;cache*&#x27;)  #æŸ¥è¯¢ä»¥cacheå¼€å¤´çš„æ‰€æœ‰key</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´å¤šï¼š</span></span><br><span class="line">    <span class="comment"># KEYS * åŒ¹é…æ•°æ®åº“ä¸­æ‰€æœ‰ key ã€‚</span></span><br><span class="line">    <span class="comment"># KEYS h?llo åŒ¹é… hello ï¼Œ hallo å’Œ hxllo ç­‰ã€‚</span></span><br><span class="line">    <span class="comment"># KEYS h*llo åŒ¹é… hllo å’Œ heeeeello ç­‰ã€‚</span></span><br><span class="line">    <span class="comment"># KEYS h[ae]llo åŒ¹é… hello å’Œ hallo ï¼Œä½†ä¸åŒ¹é… hillo </span></span><br></pre></td></tr></table></figure>

<p><strong>expire(name ,time)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ºæŸä¸ªredisçš„æŸä¸ªnameè®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br></pre></td></tr></table></figure>

<p><strong>rename(src, dst)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹redisçš„nameé‡å‘½åä¸º</span></span><br></pre></td></tr></table></figure>

<p><strong>move(name, db))</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†redisçš„æŸä¸ªå€¼ç§»åŠ¨åˆ°æŒ‡å®šçš„dbä¸‹</span></span><br></pre></td></tr></table></figure>

<p><strong>randomkey()</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºè·å–ä¸€ä¸ªredisçš„nameï¼ˆä¸åˆ é™¤ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>type(name)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–nameå¯¹åº”å€¼çš„ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p><strong>scan(cursor=0, match=None, count=None)</strong><br><strong>scan_iter(match=None, count=None)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŒå­—ç¬¦ä¸²æ“ä½œï¼Œç”¨äºå¢é‡è¿­ä»£è·å–key</span></span><br></pre></td></tr></table></figure>

<h2 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h2><p>redis-pyé»˜è®¤åœ¨æ‰§è¡Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºï¼ˆè¿æ¥æ± ç”³è¯·è¿æ¥ï¼‰å’Œæ–­å¼€ï¼ˆå½’è¿˜è¿æ¥æ± ï¼‰ä¸€æ¬¡è¿æ¥æ“ä½œï¼Œå¦‚æœæƒ³è¦åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æŒ‡å®šå¤šä¸ªå‘½ä»¤ï¼Œåˆ™å¯ä»¥ä½¿ç”¨piplineå®ç°ä¸€æ¬¡è¯·æ±‚æŒ‡å®šå¤šä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ä¸€æ¬¡pipline æ˜¯åŸå­æ€§æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"> </span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">&#x27;10.211.55.4&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line"> </span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># pipe = r.pipeline(transaction=False)</span></span><br><span class="line">pipe = r.pipeline(transaction=<span class="literal">True</span>)</span><br><span class="line">pipe.multi()</span><br><span class="line">pipe.<span class="built_in">set</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;asar&#x27;</span>)</span><br><span class="line">pipe.<span class="built_in">set</span>(<span class="string">&#x27;role&#x27;</span>, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">pipe.execute()</span><br></pre></td></tr></table></figure>

<h2 id="Djangoä¸­ä½¿ç”¨redis"><a href="#Djangoä¸­ä½¿ç”¨redis" class="headerlink" title="Djangoä¸­ä½¿ç”¨redis"></a>Djangoä¸­ä½¿ç”¨redis</h2><p><strong>æ–¹å¼ä¸€ï¼š</strong></p>
<p>utilsæ–‡ä»¶å¤¹ä¸‹ï¼Œå»ºç«‹redis_pool.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line">POOL = redis.ConnectionPool(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6379</span>,password=<span class="string">&#x27;1234&#x27;</span>,max_connections=<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p>è§†å›¾å‡½æ•°ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse</span><br><span class="line"><span class="keyword">from</span> utils.redis_pool <span class="keyword">import</span> POOL</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    conn = redis.Redis(connection_pool=POOL)</span><br><span class="line">    conn.hset(<span class="string">&#x27;kkk&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;è®¾ç½®æˆåŠŸ&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order</span>(<span class="params">request</span>):</span><br><span class="line">    conn = redis.Redis(connection_pool=POOL)</span><br><span class="line">    conn.hget(<span class="string">&#x27;kkk&#x27;</span>,<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;è·å–æˆåŠŸ&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>æ–¹å¼äºŒï¼š</strong></p>
<p>å®‰è£…django-redisæ¨¡å—</p>
<p>pip3 install django-redis</p>
<p>settingé‡Œé…ç½®ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redisé…ç½®</span></span><br><span class="line">CACHES = &#123;</span><br><span class="line">    <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;BACKEND&quot;</span>: <span class="string">&quot;django_redis.cache.RedisCache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;LOCATION&quot;</span>: <span class="string">&quot;redis://127.0.0.1:6379&quot;</span>,</span><br><span class="line">        <span class="string">&quot;OPTIONS&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;CLIENT_CLASS&quot;</span>: <span class="string">&quot;django_redis.client.DefaultClient&quot;</span>,</span><br><span class="line">            <span class="string">&quot;CONNECTION_POOL_KWARGS&quot;</span>: &#123;<span class="string">&quot;max_connections&quot;</span>: <span class="number">100</span>&#125;</span><br><span class="line">            <span class="comment"># &quot;PASSWORD&quot;: &quot;123&quot;,</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§†å›¾å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django_redis <span class="keyword">import</span> get_redis_connection</span><br><span class="line">conn = get_redis_connection(<span class="string">&#x27;default&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(conn.hgetall(<span class="string">&#x27;xxx&#x27;</span>))</span><br></pre></td></tr></table></figure></div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="Donate" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">æˆ‘å¾ˆå¯çˆ±ï¼Œè¯·ç»™æˆ‘é’±</div><div id="qr" style="display:none;"><div style="display:inline-block"></div><div style="display:inline-block"></div><div style="display:inline-block"></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>å°æ—</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" title="redis-åŸºæœ¬æ“ä½œ">http://example.com/2021/04/19/redis-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/04/19/redis-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86%E4%B8%8E%E4%BC%98%E5%8C%96/" rel="prev" title="redis-ä¸»ä»å¤åˆ¶åŸç†ä¸ä¼˜åŒ–"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">redis-ä¸»ä»å¤åˆ¶åŸç†ä¸ä¼˜åŒ–</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/04/19/redis-%E4%BD%BF%E7%94%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" rel="next" title="redis-ä½¿ç”¨å¸¸è§é—®é¢˜"><span class="post-nav-text">redis-ä½¿ç”¨å¸¸è§é—®é¢˜</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºåšå®¢å†…å®¹çš„ç›¸å…³è®¨è®ºï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/xiaolin-666/xiaolin-666.github.io/discussions" target="_blank">GitHub Discussions</a> ä¸æˆ‘äº¤æµã€‚</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">è‹ICPå¤‡17038157å·</a></div><div class="copyright"><span>&copy; 2016 â€“ 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> å°æ—</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.1</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.9.1</span></div><div class="footer-support"><span>æœ¬ç½‘ç«™ç”±</span><a class="footer-support-logo" href="https://www.upyun.com" target="blank" title="åˆæ‹äº‘"><img height="30" src="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/logo/upyun-logo.png" alt="åˆæ‹äº‘"></a><span>æä¾› CDN åŠ é€Ÿ</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>